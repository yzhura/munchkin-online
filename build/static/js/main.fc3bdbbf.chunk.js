(this["webpackJsonpmunchkin-online-app"]=this["webpackJsonpmunchkin-online-app"]||[]).push([[0],{113:function(e,t,s){},114:function(e,t,s){},115:function(e,t,s){},116:function(e,t,s){"use strict";s.r(t);var c=s(2),n=s.n(c),a=s(63),i=s.n(a),r=(s(72),s(11)),l=s(5),o=s(32),d=s.n(o),j=s(44),b=s(22);s(74),s(77);b.a.initializeApp({apiKey:"AIzaSyDNYv0GNZxYoJNhC9Z7vYxCll92Bs5hK54",authDomain:"munchkinrealtime.firebaseapp.com",databaseURL:"https://munchkinrealtime-default-rtdb.firebaseio.com",projectId:"munchkinrealtime",storageBucket:"munchkinrealtime.appspot.com",messagingSenderId:"1028055506111",appId:"1:1028055506111:web:35385513c03f849b60fa0a"});var u=b.a.database();b.a.auth().currentUser;function m(e){return O.apply(this,arguments)}function O(){return(O=Object(j.a)(d.a.mark((function e(t){var s,c,n,a,i,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.uid,c=t.displayName,n=t.email,a=t.photoURL,i=t.avatar,r=t.nickname,e.prev=1,u.ref("users/"+s).set({displayName:c,email:n,photoURL:a,avatar:i,nickname:r,uid:s},(function(e){e?console.log(e):console.log("Data saved successfully!")})),e.abrupt("return","\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!");case 6:return e.prev=6,e.t0=e.catch(1),console.log("error: ",e.t0),e.abrupt("return","error");case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function h(){return(h=Object(j.a)(d.a.mark((function e(){var t,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=b.a.auth().currentUser.uid){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,u.ref("users").child(s).get().then((function(e){e.exists()?t=Object.assign({},e.val()):console.log("No data available")})).catch((function(e){console.error(e)}));case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=new b.a.auth.GoogleAuthProvider,p=b.a,f=s(10),v=s(6),g=s(31),N=["\u0410\u0432\u0430\u043b\u043b\u043e\u043d\u044d","\u0412\u0430\u043b\u0438\u043d\u043e\u0440","\u0418\u043b\u044c\u043c\u0430\u0440\u0438\u043d","\u0422\u0438\u0440\u0438\u043e\u043d","\u0424\u043e\u0440\u043c\u0435\u043d\u043e\u0441","\u0410\u043d\u0433\u0431\u0430\u043d\u0434","\u0413\u043e\u043d\u0434\u043e\u043b\u0438\u043d","\u041c\u0435\u043d\u0435\u0433\u0440\u043e\u0442","\u0423\u0442\u0443\u043c\u043d\u043e","\u0425\u0438\u043c\u0440\u0438\u043d\u0433","\u041e\u043d\u0434\u043e\u0441\u0442\u043e","\u041f\u0435\u043b\u0430\u0440\u0433\u0438\u0440","\u0420\u043e\u043c\u0435\u043d\u043d\u0430","\u0411\u0435\u043b\u0435\u0433\u043e\u0441\u0442","\u0413\u043e\u0440\u043e\u0434 \u0413\u043e\u0431\u043b\u0438\u043d\u043e\u0432","\u0418\u0437\u0435\u043d\u0433\u0430\u0440\u0434","\u041a\u0430\u043b\u044d\u043c\u0431\u0435\u043b\u044c","\u041c\u0438\u0442\u043b\u043e\u043d\u0434","\u041c\u043e\u0440\u0438\u044f","\u041d\u043e\u0433\u0440\u043e\u0434","\u041e\u0441\u0433\u0438\u043b\u0438\u0430\u0442","\u041f\u0435\u043b\u0430\u0440\u0433\u0438\u0440","\u041f\u0440\u0438\u0433\u043e\u0440\u044c\u0435","\u0422\u0430\u0440\u0431\u0430\u0434","\u0423\u043c\u0431\u0430\u0440","\u0424\u043e\u0440\u043d\u043e\u0441\u0442","\u0425\u043e\u0431\u0431\u0438\u0442\u043e\u043d","\u0425\u0430\u0440\u043b\u043e\u043d\u0434","\u0425\u043e\u0440\u043d\u0431\u0443\u0440\u0433","\u042d\u0433\u043b\u0430\u0440\u0435\u0441\u0442","\u042d\u0434\u043e\u0440\u0430\u0441","\u042d\u0442\u0440\u0438\u043d\u0433","\u0411\u0430\u0440\u0430\u0434-\u0414\u0443\u0440","\u0414\u0443\u0440\u0442\u0430\u043d\u0433","\u041c\u043e\u0440\u0434\u043e\u0440","\u0414\u0435\u0439\u043b","\u042d\u0440\u0435\u0431\u043e\u0440","\u042d\u0441\u0433\u0430\u0440\u043e\u0442","\u041a\u043e\u0440\u043e\u043b\u0435\u0432\u0441\u043a\u0430\u044f \u0413\u0430\u0432\u0430\u043d\u044c","\u0421\u0442\u0430\u0440\u043e\u043c\u0435\u0441\u0442","\u0411\u0435\u043b\u0430\u044f \u0413\u0430\u0432\u0430\u043d\u044c","\u041b\u0430\u043d\u043d\u0438\u0441\u043f\u043e\u0440\u0442","\u0420\u0435\u0447\u043d\u044b\u0435 \u0437\u0435\u043c\u043b\u0438","\u0414\u043e\u0440\u043d","\u0416\u0435\u043b\u0435\u0437\u043d\u044b\u0435 \u043e\u0441\u0442\u0440\u043e\u0432\u0430","\u0421\u0435\u0432\u0435\u0440","\u0416\u0435\u043b\u0435\u0437\u043d\u044b\u0435 \u043e\u0441\u0442\u0440\u043e\u0432\u0430","\u0410\u0441\u0448\u0430\u0439","\u0412\u043e\u043b\u044c\u043d\u044b\u0435 \u0433\u043e\u0440\u043e\u0434\u0430","\u0425\u0440\u0435\u0431\u0435\u0442 \u041a\u043e\u0441\u0442\u0435\u0439","\u0428\u0438\u0440","\u041d\u043e\u0440\u0430 \u0445\u043e\u0431\u0431\u0438\u0442\u0430","\u0417\u0435\u043b\u0451\u043d\u044b\u0435 \u0425\u043e\u043b\u043c\u044b","\u0417\u0430\u043b\u0435\u0441\u044c\u0435"],k=s(1),y=Object(v.g)((function(e){var t=e.history,s=Object(c.useState)(""),n=Object(l.a)(s,2),a=n[0],i=n[1],r=Object(c.useContext)(Q).user;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:"home-header d-flex justify-content-between align-items-center",children:[r.isAnonymous?Object(k.jsx)("div",{className:"profile-avatar ",children:Object(k.jsx)("img",{src:r.avatar,alt:"user-avatar"})}):Object(k.jsxs)(f.b,{to:"/profile/",className:"profile-link d-flex align-items-center",children:[Object(k.jsx)("div",{className:"profile-avatar ",children:Object(k.jsx)("img",{src:r.avatar,alt:"user avatar"})}),Object(k.jsxs)("span",{className:"d-flex align-items-center",children:[Object(k.jsx)("i",{className:"icon-left-arrow mr-2"})," \u041f\u0440\u043e\u0444\u0438\u043b\u044c"]})]}),Object(k.jsxs)("button",{onClick:function(){p.auth().signOut().then((function(){t.push("/signin")})).catch((function(e){}))},className:"btn btn-outline d-flex align-items-center",children:["\u0412\u044b\u0439\u0442\u0438 ",Object(k.jsx)("i",{className:"icon-log-out ml-2"})]})]}),Object(k.jsxs)("h1",{children:["\u041f\u0440\u0438\u0432\u0435\u0442, ",r.nickname||r.displayName,"!"]}),Object(k.jsx)("p",{children:'\u041f\u0440\u0438\u0434\u0443\u043c\u0430\u0439\u0442\u0435 \u0441 \u0434\u0440\u0443\u0437\u044c\u044f\u043c\u0438 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043d\u0430\u0442\u044b \u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 "\u0412 \u043f\u0443\u0442\u044c!"'}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{htmlFor:"roomName",children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043d\u0430\u0442\u044b:"}),Object(k.jsxs)("div",{className:"field d-flex align-items-center",children:[Object(k.jsx)("input",{type:"text",id:"roomName",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043d\u0430\u0442\u044b",value:a,onChange:function(e){""===e.target.value?(e.target.classList.add("is-invalid"),e.target.classList.remove("is-valid")):(e.target.classList.remove("is-invalid"),e.target.classList.add("is-valid")),i(e.target.value)},className:"form-control room-name mr-4 w-75"}),Object(k.jsx)(f.b,{to:"/lobby/".concat(a),className:"enter-room-name-button btn btn-primary flex-shrink-0 ".concat(a?"enabled":"disabled"),children:"\u0412 \u043f\u0443\u0442\u044c!"})]})]}),Object(k.jsx)("button",{className:"btn btn-info mb-5",onClick:function(){i(Object(g.b)({dictionaries:[N]}))},children:"\u0420\u0430\u043d\u0434\u043e\u043c\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"})]})})),S=s(19),w=s(65),C=s.n(w),L="newChatMessage",U="newRoomConnection",I="generateNumber",R=function(e){var t=Object(c.useState)([]),s=Object(l.a)(t,2),n=s[0],a=s[1],i=Object(c.useState)([]),o=Object(l.a)(i,2),d=o[0],j=o[1],b=Object(c.useState)(null),u=Object(l.a)(b,2),m=u[0],O=u[1],h=Object(c.useState)(!1),x=Object(l.a)(h,2),p=x[0],f=x[1],v=Object(c.useState)(!1),g=Object(l.a)(v,2),N=g[0],k=g[1],y=Object(c.useState)(""),w=Object(l.a)(y,2),R=w[0],D=w[1],A=Object(c.useState)(1),M=Object(l.a)(A,2),T=M[0],E=M[1],G=Object(c.useState)(!1),B=Object(l.a)(G,2),F=B[0],P=B[1],z=Object(c.useState)(!1),J=Object(l.a)(z,2),Y=J[0],K=J[1],W=Object(c.useRef)(),Z=Object(c.useContext)(Q).user;Object(c.useEffect)((function(){return W.current=C()("localhost:4000",{query:{roomId:e}}),W.current.on(U,(function(t,s,c){var n=t.users,a=t.roomName,i=t.timer,r=t.cubic;a===e&&(s&&(k(s),D(c)),j((function(e){return Object(S.a)(n)})),O(i),E(r))})),W.current.on(L,(function(e){var t=Object(r.a)(Object(r.a)({},e),{},{ownedByCurrentUser:e.senderId===W.current.id});a((function(e){return[].concat(Object(S.a)(e),[t])}))})),W.current.on("roomIsDeleted",(function(e){f(e),j((function(e){return[]}))})),W.current.on("connect",(function(){})),W.current.on("connect",(function(){})),W.current.on(I,(function(e){K(!0),E(e),P((function(e){return!e})),setTimeout((function(){K(!1)}),3e3)})),function(){W.current.emit("userDisconnect",Z.uid),W.current.disconnect()}}),[e]);return{messages:n,connections:d,isRoomDeleted:p,timer:m,isRoomClosed:N,cubicNumber:T,cubicAnimation:Y,cubicToggleAnimate:F,disconnectedUser:R,sendMessage:function(e,t){W.current.emit(L,{body:e,user:t,senderId:W.current.id})},sendSkills:function(e){W.current.emit("newSkillsEvent",e)},sendInitConnection:function(e){var t=e.nickname,s=e.uid,c=(e.photoURL,e.userLevel),n=e.userStrength,a=e.avatar;W.current.emit(U,{name:t,id:s,level:c,strength:n,photo:a})},sendGenerateNumber:function(){W.current.emit(I)}}},D=(s(113),function(){return Object(k.jsx)("div",{className:"loading-wrap",children:Object(k.jsx)("div",{className:"loadingio-spinner-magnify-0n35bg6fv0o",children:Object(k.jsx)("div",{className:"ldio-ycn6zcb0j2",children:Object(k.jsx)("div",{children:Object(k.jsxs)("div",{children:[Object(k.jsx)("div",{}),Object(k.jsx)("div",{})]})})})})})}),A=(s(114),function(e){var t=e.nickname,s=e.photoURL,c=e.userLevel,n=e.disabledLevelDown,a=e.userStrength,i=e.disabledStrengthDown,r=e.handleSkills;return r?Object(k.jsx)("div",{className:"user-card user-main",children:Object(k.jsxs)("div",{className:"user-avatar-card",children:[Object(k.jsx)("p",{className:"nickname",children:t}),Object(k.jsxs)("div",{className:"user-sum-skills",children:["\u041e\u0431\u0449\u0438\u0439: ",Object(k.jsx)("span",{children:a+c})]}),Object(k.jsx)("img",{src:s,alt:"",className:"avatar"}),Object(k.jsxs)("div",{className:"user-info",children:[Object(k.jsxs)("div",{className:"user-skills user-level",children:[Object(k.jsx)("button",{className:"btn btn-outline-danger",onClick:function(){return r("levelDown")},disabled:n,children:"-"}),Object(k.jsxs)("p",{className:"user-skill-text",children:["\u0423\u0440\u043e\u0432\u0435\u043d\u044c: ",Object(k.jsx)("span",{children:c})]}),Object(k.jsx)("button",{className:"btn btn-outline-success",onClick:function(){return r("levelUp")},children:"+"})]}),Object(k.jsxs)("div",{className:"user-skills user-strength",children:[Object(k.jsx)("button",{onClick:function(){return r("strengthDown")},disabled:i,className:"btn btn-outline-danger",children:"-"}),Object(k.jsxs)("p",{className:"user-skill-text",children:["\u0421\u0438\u043b\u0430: ",Object(k.jsx)("span",{children:a})]}),Object(k.jsx)("button",{onClick:function(){return r("strengthUp")},className:"btn btn-outline-success",children:"+"})]})]})]})}):Object(k.jsx)("div",{className:"user-card",children:Object(k.jsxs)("div",{className:"user-avatar-card",children:[Object(k.jsx)("p",{className:"nickname",children:t}),Object(k.jsxs)("div",{className:"user-sum-skills",children:["\u041e\u0431\u0449\u0438\u0439: ",Object(k.jsx)("span",{children:a+c})]}),Object(k.jsx)("img",{src:s,alt:"",className:"avatar"}),Object(k.jsxs)("div",{className:"user-info",children:[Object(k.jsxs)("div",{className:"user-level",children:["\u0423\u0440\u043e\u0432\u0435\u043d\u044c: ",Object(k.jsx)("span",{children:c})]}),Object(k.jsxs)("div",{className:"user-strength",children:["\u0421\u0438\u043b\u0430: ",Object(k.jsx)("span",{children:a})]})]})]})})}),M=(s(115),function(e){var t=e.number,s=e.toggle;return Object(k.jsx)("div",{className:"dice-holder",children:Object(k.jsx)("div",{className:"dice",children:Object(k.jsxs)("ol",{className:"die-list even-roll ".concat(s?"odd-roll":""),"data-roll":t,children:[Object(k.jsx)("li",{className:"die-item","data-side":"1",children:Object(k.jsx)("span",{className:"dot"})}),Object(k.jsxs)("li",{className:"die-item","data-side":"2",children:[Object(k.jsx)("span",{className:"dot"}),Object(k.jsx)("span",{className:"dot"})]}),Object(k.jsxs)("li",{className:"die-item","data-side":"3",children:[Object(k.jsx)("span",{className:"dot"}),Object(k.jsx)("span",{className:"dot"}),Object(k.jsx)("span",{className:"dot"})]}),Object(k.jsxs)("li",{className:"die-item","data-side":"4",children:[Object(k.jsx)("span",{className:"dot"}),Object(k.jsx)("span",{className:"dot"}),Object(k.jsx)("span",{className:"dot"}),Object(k.jsx)("span",{className:"dot"})]}),Object(k.jsxs)("li",{className:"die-item","data-side":"5",children:[Object(k.jsx)("span",{className:"dot"}),Object(k.jsx)("span",{className:"dot"}),Object(k.jsx)("span",{className:"dot"}),Object(k.jsx)("span",{className:"dot"}),Object(k.jsx)("span",{className:"dot"})]}),Object(k.jsxs)("li",{className:"die-item","data-side":"6",children:[Object(k.jsx)("span",{className:"dot"}),Object(k.jsx)("span",{className:"dot"}),Object(k.jsx)("span",{className:"dot"}),Object(k.jsx)("span",{className:"dot"}),Object(k.jsx)("span",{className:"dot"}),Object(k.jsx)("span",{className:"dot"})]})]})})})});function T(e){var t=parseInt(e/1e3%60),s=parseInt(e/6e4%60),c=parseInt(e/36e5%24);return(c=c<10?"0"+c:c)+":"+(s=s<10?"0"+s:s)+":"+(t=t<10?"0"+t:t)}var E=Object(v.g)((function(e){var t=Object(c.useContext)(Q).user,s=e.match.params.roomId,n=R(s),a=n.messages,i=n.connections,o=n.isRoomDeleted,d=n.timer,j=n.isRoomClosed,b=n.cubicNumber,u=n.cubicAnimation,m=n.cubicToggleAnimate,O=n.disconnectedUser,h=n.sendMessage,x=n.sendSkills,p=n.sendInitConnection,f=n.sendGenerateNumber,g=Object(c.useState)(""),N=Object(l.a)(g,2),y=N[0],S=N[1],w=Object(c.useState)(1),C=Object(l.a)(w,2),L=C[0],U=C[1],I=Object(c.useState)(0),E=Object(l.a)(I,2),G=E[0],B=E[1],F=Object(c.useState)(d),P=Object(l.a)(F,2),z=P[0],J=P[1],Y=t.uid,K=t.nickname,W=t.avatar,Z=L<2,q=0===G;if(Object(c.useEffect)((function(){return p(Object(r.a)(Object(r.a)({},t),{},{userLevel:L,userStrength:G})),function(){console.log("Unmount")}}),[]),Object(c.useEffect)((function(){x({userLevel:L,userStrength:G,userId:Y})}),[L,G]),Object(c.useEffect)((function(){var e;return J(d),d&&(e=setInterval((function(){J((function(e){return e-1e3}))}),1e3)),function(){clearInterval(e)}}),[d,i]),j&&Y===O)return Object(k.jsx)(v.a,{to:{pathname:"/error",state:{title:"\u041e\u0448\u0438\u0431\u043a\u0430",body:"\u042d\u0442\u0430 \u043a\u043e\u043c\u043d\u0430\u0442\u0430 \u0443\u0436\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0430, \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 10 \u0438\u0433\u0440\u043e\u043a\u043e\u0432",redirectToLink:"/",redirectToText:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434!"}}});if(0===i.length)return Object(k.jsx)(D,{});if(o)return Object(k.jsx)(v.a,{to:"/"});var V=i.filter((function(e){return e.id!==t.uid})),H=i.find((function(e){return 10===e.level}));return Object(k.jsxs)("div",{className:"lobby-wrap w-100 text-center",children:[Object(k.jsxs)("h1",{className:"mt-0 mb-2",children:["\u041a\u043e\u043c\u043d\u0430\u0442\u0430: ",s]}),Object(k.jsxs)("p",{children:["\u042d\u0442\u0430 \u043a\u043e\u043c\u043d\u0430\u0442\u0430 \u0443\u0434\u0430\u043b\u0438\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437: ",T(z)]}),H?Object(k.jsxs)("div",{className:"alert alert-dismissible alert-success",children:["\u0412\u043e\u0443! ",Object(k.jsx)("br",{}),"\u041f\u043e\u0431\u0435\u0434\u0438\u043b: ",H.name]}):null,Object(k.jsxs)("div",{className:"header m-auto position-relative",children:[Object(k.jsx)(A,{nickname:K,photoURL:W,userLevel:L,disabledLevelDown:Z,userStrength:G,disabledStrengthDown:q,handleSkills:function(e){switch(e){case"levelUp":U((function(e){return e+1}));break;case"levelDown":U((function(e){return e-1}));break;case"strengthUp":B((function(e){return e+1}));break;case"strengthDown":B((function(e){return e-1}));break;default:return!1}}}),Object(k.jsx)("div",{className:"cubic-wrap",children:Object(k.jsx)("button",{className:"cubic-btn",onClick:function(){f()},disabled:u,children:Object(k.jsx)(M,{number:b,toggle:m})})})]}),Object(k.jsx)("div",{className:"row",children:V.map((function(e,t){return Object(k.jsx)("div",{className:"col-6",children:Object(k.jsx)(A,{nickname:e.name,photoURL:e.photo,userLevel:e.level,userStrength:e.strength})},t)}))}),Object(k.jsxs)("div",{className:"area-wrap",children:[Object(k.jsx)("div",{className:"messages-container",children:Object(k.jsx)("ul",{className:"messages-list",children:a.map((function(e,t){return Object(k.jsxs)("li",{className:"message-item ".concat(e.ownedByCurrentUser?"my-message":"received-message"),children:[Object(k.jsxs)("span",{children:[e.user,":"]}),Object(k.jsx)("br",{}),e.body]},t)}))})}),Object(k.jsxs)("div",{className:"textarea-wrap position-relative w-100",children:[Object(k.jsx)("textarea",{value:y,onChange:function(e){S(e.target.value)},placeholder:"Write message...",className:"new-message-input"}),Object(k.jsx)("button",{onClick:function(){h(y,K),S("")},className:"send-message-button",children:Object(k.jsx)("i",{className:"icon-send"})})]})]})]})})),G=function(e){var t=e.googleLogin,s=e.anonymousLogin;return Object(k.jsx)("div",{className:"container",children:Object(k.jsxs)("div",{className:"text-center mb-5",children:[Object(k.jsx)("h1",{children:"\u041f\u0440\u0438\u0432\u0435\u0442!"}),Object(k.jsxs)("button",{type:"button",className:"btn btn-primary mb-3 d-inline-flex align-items-center",onClick:t,children:[Object(k.jsx)("i",{className:"icon-google mr-2"})," \u0412\u043e\u0439\u0442\u0438 \u0447\u0435\u0440\u0435\u0437 Google"]}),Object(k.jsx)("p",{children:"\u041f\u043e\u0441\u043b\u0435 \u0432\u0445\u043e\u0434\u0430 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0447\u0435\u0440\u0435\u0437 Google, \u0442\u044b \u0441\u043c\u043e\u0436\u0435\u0448\u044c \u0441\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0438\u043a\u043d\u0435\u0439\u043c \u0438 \u0430\u0432\u0430\u0442\u0430\u0440"}),Object(k.jsx)("p",{children:"\u0438\u043b\u0438"}),Object(k.jsxs)("button",{type:"button",className:"btn btn-secondary mb-3 d-inline-flex align-items-center",onClick:s,children:[Object(k.jsx)("i",{className:"icon-anonymous mr-2"}),"\u0412\u043e\u0439\u0442\u0438 \u043a\u0430\u043a \u0433\u043e\u0441\u0442\u044c*"]}),Object(k.jsx)("p",{children:"*\u0411\u0443\u0434\u0435\u0442 \u043f\u0440\u0438\u0441\u0432\u043e\u0435\u043d \u0440\u0430\u043d\u0434\u043e\u043c\u043d\u044b\u0439 \u043d\u0438\u043a\u043d\u0435\u0439\u043c \u0438 \u0430\u0432\u0430\u0442\u0430\u0440"})]})})},B=function(e){var t=e.show,s=e.title,c=e.children,n=e.save,a=e.setModal,i=e.disableSave;return Object(k.jsx)("div",{className:"modal ".concat(t?"d-block":"d-none"),children:Object(k.jsx)("div",{className:"modal-dialog",role:"document",children:Object(k.jsxs)("div",{className:"modal-content",children:[Object(k.jsxs)("div",{className:"modal-header",children:[Object(k.jsx)("h5",{className:"modal-title",children:s}),Object(k.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return a(!1)},children:Object(k.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(k.jsx)("div",{className:"modal-body",children:c}),Object(k.jsxs)("div",{className:"modal-footer",children:[Object(k.jsx)("button",{type:"button",className:"btn btn-primary ".concat(i?"d-none":""),onClick:function(){return n},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(k.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:function(){return a(!1)},children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]})]})})})},F=[s.p+"static/media/ancient.a0dae3df.png",s.p+"static/media/baby.244b91b7.png",s.p+"static/media/crabs.eef293ba.png",s.p+"static/media/elf.22aa2bd6.png",s.p+"static/media/geek.e85d9a46.png",s.p+"static/media/goblin.5438a933.png",s.p+"static/media/goose.044ea5b3.png",s.p+"static/media/krisotka.d6650593.png",s.p+"static/media/munchkin.d245a994.png",s.p+"static/media/thief.d826a142.png",s.p+"static/media/troll.fd431f4f.png",s.p+"static/media/warrior.b7c10044.png",s.p+"static/media/boromir.752e3c34.jpg",s.p+"static/media/frodo.21bbee36.jpg",s.p+"static/media/gendalf.a8b98dfb.jpg",s.p+"static/media/gollum.a452aa12.jpg"],P=F[Math.floor(Math.random()*F.length)],z=F;function J(e,t,s){this.checked=e,this.src=t,this.id=s}var Y=function(e){var t=e.chooseAvatar,s=e.googlePhoto,n=[];n.push(new J(!1,s,0));for(var a=0;a<z.length;a++)n.push(new J(!1,z[a],a+1));var i=Object(c.useState)(n),r=Object(l.a)(i,2),o=r[0],d=r[1];return Object(k.jsx)("ul",{className:"avatars-list d-flex flex-wrap",children:o.map((function(e,s){return Object(k.jsx)("li",{className:"".concat(e.checked?"checked":""),children:Object(k.jsx)("div",{className:"avatars-list-item avatar-holder",onClick:function(){return function(e,s){var c=Object(S.a)(o);c.forEach((function(s){s.checked=!1,s.id===e&&(s.checked=!s.checked,t(s.src))})),d(c)}(e.id,e.src)},children:Object(k.jsx)("img",{src:e.src})})},s)}))})},K=Object(v.g)((function(){var e=Object(c.useContext)(Q).user,t=e.nickname,s=e.avatar,a=e.photoURL,i=Object(c.useState)(s),r=Object(l.a)(i,2),o=r[0],d=r[1],j=Object(c.useState)(t),b=Object(l.a)(j,2),u=b[0],O=b[1],h=Object(c.useState)(""),x=Object(l.a)(h,2),p=x[0],v=x[1],g=Object(c.useState)(!1),N=Object(l.a)(g,2),y=N[0],S=N[1],w=Object(c.useState)(!1),C=Object(l.a)(w,2),L=C[0],U=C[1];return Object(k.jsxs)(n.a.Fragment,{children:[Object(k.jsxs)("div",{className:"profile-wrap",children:[Object(k.jsx)(f.b,{to:"/",className:"icon-return"}),Object(k.jsx)("h1",{className:"text-center",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(k.jsx)("div",{className:"avatar-holder",children:Object(k.jsx)("img",{src:o,alt:"avatar"})}),Object(k.jsxs)("button",{onClick:function(){return U((function(e){return!e}))},className:"btn btn-info d-flex align-items-center mt-2 mr-auto ml-auto mb-3",children:["\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440 ",Object(k.jsx)("i",{className:"icon-edit ml-2"})," "]}),Object(k.jsxs)("div",{className:"form-group",children:[Object(k.jsx)("label",{className:"form-control-label",htmlFor:"nickname",children:"\u041d\u0438\u043a\u043d\u0435\u0439\u043c:"}),Object(k.jsx)("input",{className:"form-control",id:"nickname",defaultValue:t,onChange:function(e){v("");var t=e.target.value.length;0===t||t>30?(e.target.classList.add("is-invalid"),e.target.classList.remove("is-valid"),S(!0)):(e.target.classList.remove("is-invalid"),e.target.classList.add("is-valid"),O(e.target.value),S(!1))}})]}),p?Object(k.jsx)("p",{className:"text-success",children:p}):null,Object(k.jsx)("button",{type:"button",className:"btn btn-success",onClick:function(){var t=Object.assign(e);t.nickname=u,t.avatar=o,m(t).then((function(e){v(e)}))},disabled:y,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(k.jsx)(B,{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",show:L,setModal:U,disableSave:!0,children:Object(k.jsx)(Y,{chooseAvatar:function(e){v(""),d(e)},googlePhoto:a})})]})})),W=function(e){var t=Object(c.useState)("\u041e\u0448\u0438\u0431\u043a\u0430 :("),s=Object(l.a)(t,2),n=s[0],a=s[1],i=Object(c.useState)("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a."),r=Object(l.a)(i,2),o=r[0],d=r[1],j=Object(c.useState)("/"),b=Object(l.a)(j,2),u=b[0],m=b[1],O=Object(c.useState)("\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"),h=Object(l.a)(O,2),x=h[0],p=h[1];return Object(c.useEffect)((function(){if(e.location.state){var t=e.location.state,s=t.title,c=t.body,n=t.redirectToLink,i=t.redirectToText;a(s),d(c),m(n),p(i)}}),[]),Object(k.jsxs)("div",{children:[Object(k.jsx)("h1",{children:n}),Object(k.jsx)("p",{children:o}),Object(k.jsx)(f.b,{className:"btn btn-primary",to:u,children:x})]})},Z=s(29),q=s(30),V=s(67),H=s(66),Q=(n.a.Component,n.a.createContext("")),X=function(){var e=Object(c.useState)(null),t=Object(l.a)(e,2),s=t[0],n=t[1],a=Object(c.useState)(!0),i=Object(l.a)(a,2),o=i[0],d=i[1],j=Object(c.useState)(!1),b=Object(l.a)(j,2),u=b[0],O=b[1],N=function(){p.auth().signInWithPopup(x).then((function(e){e.credential.accessToken})).catch((function(e){var t=e.code,s=e.message,c=e.email,n=e.credential;console.log("errorCode:",t),console.log("errorMessage:",s),console.log("email:",c),console.log("credential:",n)}))},S=function(){p.auth().signInAnonymously().then((function(e){O(!0)})).catch((function(e){e.code,e.message}))};return Object(c.useEffect)((function(){p.auth().onAuthStateChanged((function(e){if(d(!0),e){if(e.isAnonymous){var t=Object(g.b)({dictionaries:[g.a]}),s=e.uid;return n({photoURL:P,avatar:P,uid:s,nickname:t,isAnonymous:!0}),void d(!1)}var c=e.uid,a=e.displayName,i=e.email,r=e.photoURL,l=a,o=r;(function(){return h.apply(this,arguments)})().then((function(e){e?(n(e),d(!1)):m({uid:c,displayName:a,email:i,photoURL:r,avatar:o,nickname:l}).then((function(e){"error"!==e&&(n({uid:c,displayName:a,email:i,photoURL:r,avatar:o,nickname:l}),O(!0),d(!1))}))}))}else n(null),d(!1),O(!1)}))}),[u]),o?Object(k.jsx)(D,{}):s?Object(k.jsx)(Q.Provider,{value:{user:s,googleLogin:N,anonymousLogin:S},children:Object(k.jsxs)(f.a,{children:[Object(k.jsx)("h1",{className:"m-b-5 m-t-5 text-center logo",children:"Munchkin"}),Object(k.jsx)("div",{className:"container",children:Object(k.jsxs)(v.d,{children:[Object(k.jsx)(v.b,{exact:!0,path:"/profile/",component:K}),Object(k.jsx)(v.b,{exact:!0,path:"/lobby/:roomId/",component:E}),Object(k.jsx)(v.b,{exact:!0,path:"/error",render:function(e){return Object(k.jsx)(W,Object(r.a)({},e))}}),Object(k.jsx)(v.b,{exact:!0,path:"/",component:y}),Object(k.jsx)(v.a,{to:"/"})]})})]})}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("h1",{className:"m-b-5 m-t-5 text-center logo",children:"Munchkin"}),Object(k.jsx)(G,{googleLogin:N,anonymousLogin:S})]})};i.a.render(Object(k.jsx)(n.a.StrictMode,{children:Object(k.jsx)(X,{})}),document.getElementById("root"))},72:function(e,t,s){}},[[116,1,2]]]);
//# sourceMappingURL=main.fc3bdbbf.chunk.js.map